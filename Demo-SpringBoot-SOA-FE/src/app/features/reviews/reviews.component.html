<div class="container mt-4">
  <h3 class="text-center mb-4">Đánh giá phòng</h3>

  <div *ngIf="currentUser; else loginWarning">
    <div class="input-group mb-3">
      <input
        [(ngModel)]="newComment"
        name="comment"
        class="form-control"
        placeholder="Nhập đánh giá của bạn..."
      />
      <button (click)="addReview()" class="btn btn-primary">Gửi</button>
    </div>
  </div>

  <ng-template #loginWarning>
    <div class="alert alert-warning text-center">
      ⚠️ Bạn cần <a routerLink="/login">đăng nhập</a> để gửi đánh giá.
    </div>
  </ng-template>

  <hr />

  <div *ngIf="reviews.length > 0; else noReviews">
    <div *ngFor="let r of reviews" class="review-card p-3 mb-3 border rounded">
      <h5 class="fw-bold">Vai trò : {{ r.user?.username || 'Người dùng' }}</h5>
      <p class="text-muted mb-1"> Ngày đánh giá : {{ r.createdAt | date: 'dd/MM/yyyy HH:mm' }}</p>
      <p>Nội dung : {{ r.comment }}</p>
    </div>
  </div>

  <ng-template #noReviews>
    <p class="text-center text-muted">Chưa có đánh giá nào.</p>
  </ng-template>
</div>
